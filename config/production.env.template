# Nova NIC Production Environment Template
# =========================================
# Copy this file to .env and configure for your environment
# Never commit .env to version control!

# === SECURITY (REQUIRED) ===
# Generate with: openssl rand -hex 32
SECRET_KEY=CHANGE_ME_GENERATE_WITH_OPENSSL_RAND_HEX_32

# API authentication (optional but recommended)
# NOVA_API_TOKEN=your-secure-api-token
# NOVA_REQUIRE_TOKEN=1

# Cache encryption key
NOVA_CACHE_SECRET=CHANGE_ME_GENERATE_ANOTHER_KEY

# === LLM CONFIGURATION ===
# Ollama connection
OLLAMA_BASE_URL=http://ollama:11434/v1
OLLAMA_URL=http://ollama:11434

# Model selection
NOVA_LLM_LLAMA=llama3.2:3b
NOVA_LLM_OSS=qwen2.5-coder:7b

# Native LLM (set to 1 to use local models instead of Ollama)
NOVA_USE_NATIVE_LLM=0

# === RETRIEVAL ===
# Hybrid search (recommended)
NOVA_HYBRID_SEARCH=1

# BM25 parameters (tuned for technical documentation)
NOVA_BM25_K1=1.5
NOVA_BM25_B=0.75
NOVA_BM25_CACHE=1

# Domain boosting
NOVA_DOMAIN_BOOST=1
NOVA_DOMAIN_BOOST_FACTOR=0.25

# Embedding model path
NOVA_EMBEDDING_MODEL=models/nic-embeddings-v1.0

# === SAFETY ===
# Grounded Answer Refinement (recommended for production)
NOVA_GAR_ENABLED=1

# Citation auditing (recommended)
NOVA_CITATION_AUDIT=1
# NOVA_CITATION_STRICT=1

# Anomaly detection
NOVA_ANOMALY_DETECTOR=0

# === CACHING ===
# Retrieval cache (improves latency for repeated queries)
NOVA_ENABLE_RETRIEVAL_CACHE=1
NOVA_RETRIEVAL_CACHE_SIZE=256

# === LOGGING ===
# JSON format for production (better for log aggregation)
NOVA_LOG_FORMAT=json
NOVA_LOG_LEVEL=INFO
NOVA_LOG_FILE=/app/logs/nova.log
NOVA_LOG_MAX_SIZE=100
NOVA_LOG_BACKUP_COUNT=10

# SQL logging (disable in production for performance)
NOVA_ENABLE_SQL_LOG=0

# === RATE LIMITING ===
NOVA_RATE_LIMIT_ENABLED=1
NOVA_RATE_LIMIT_PER_HOUR=100
NOVA_RATE_LIMIT_PER_MINUTE=20

# === HEALTH CHECKS ===
NOVA_HEALTH_DISK_MIN_GB=2.0
NOVA_HEALTH_MEMORY_MAX_PERCENT=85.0
NOVA_HEALTH_OLLAMA_TIMEOUT=10.0

# === PERFORMANCE ===
# Warm up models on startup (slower start, faster first query)
NOVA_WARMUP_ON_START=1

# Batch size for embeddings
NOVA_EMBED_BATCH_SIZE=32

# Feature toggles
NOVA_DISABLE_VISION=0
NOVA_DISABLE_EMBED=0
NOVA_DISABLE_CROSS_ENCODER=0

# === ENVIRONMENT ===
NOVA_ENV=production

# Offline mode (set for air-gapped deployments)
# NOVA_FORCE_OFFLINE=1
# HF_HUB_OFFLINE=1
# TRANSFORMERS_OFFLINE=1
